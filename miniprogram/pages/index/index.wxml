<!--index.wxml-->

<import src="/pages/common/footer.wxml" />

<view class='page'>

  <view class="page__hd">
    <view class="page__title">打卡？打你妹！</view>
  </view>

  <view class="page__bd page__bd_spacing">
    <button wx:if="{{ !hasLocation }}" class='weui-btn' type='primary' bindtap='getAddress' style="margin: 80px 0;">获取当前位置</button>

    <!-- <button class='weui-btn' type='primary' bindtap='openLocation'>使用微信内置地图查看位置</button> -->
    <view wx:if="{{ hasLocation }}">
      <map longitude="{{ location_details.location.lng }}" latitude="{{ location_details.location.lat }}" subkey="3FOBZ-ZWAC4-5WHUK-XF4HT-PGGKV-TBB3Q" show-location></map>

      <view class="page__desc">
        您当前的位置是“{{ location_details.address }} {{ location_details.formatted_addresses.recommend }}”
      </view>
      <!-- <view class="page__desc">
        距离您最近最著名的地方是“{{ location_details.address_reference.famous_area.title }}”
      </view> -->
      <view class="page__desc">
        您当前的定位坐标为：经度{{ location_details.location.lng }}，纬度{{ location_details.location.lat }}
      </view>
      <!-- 定位不准确？手动选择你的位置 -->
      <view class="weui-cells__title">定位不准确？试试手动选择你的位置吧!</view>
      <button class='weui-btn' type='default' bindtap='chooseLocation'>打开地图选择位置</button>
      <button class='weui-btn' type='default' bindtap='getAddress'>重新获取当前位置</button>
      <button class='weui-btn' type='primary' bindtap='mark'>打卡</button>
    </view>

    <view class="{{ hasLocation ? 'weui-footer' : 'weui-footer weui-footer_fixed-bottom'}}" style="{{ hasLocation ? 'margin-top: 25px;' : 'margin-top: 25px; margin-bottom: 40px'}}">
      <view class="weui-footer__links">
        <navigator url="" class="weui-footer__link">夏龙飞</navigator>
      </view>
      <view class="weui-footer__text">Copyright © 2008-2016 weui.io</view>
    </view>
  </view>

</view>